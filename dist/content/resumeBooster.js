(()=>{"use strict";var t={931:(t,e,o)=>{const n=new class{constructor(){this.logs=[],this.maxLogs=100,this.storageKey="extension_error_logs"}async log(t,e,o,n){const s={timestamp:(new Date).toISOString(),level:t,component:e,message:o,data:n?JSON.stringify(n).substring(0,200):void 0};this.logs.push(s),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs));try{await chrome.storage.local.set({[this.storageKey]:this.logs})}catch(t){console.error("Failed to save logs to storage:",t)}const i=`[${t}] ${e}: ${o}`;switch(t){case"ERROR":case"CRITICAL":console.error(i,n);break;case"WARNING":console.warn(i,n);break;case"SUCCESS":console.log(i,n)}}async getLogs(){try{return(await chrome.storage.local.get([this.storageKey]))[this.storageKey]||[]}catch(t){return console.error("Failed to get logs from storage:",t),[]}}async clearLogs(){try{this.logs=[],await chrome.storage.local.remove([this.storageKey])}catch(t){console.error("Failed to clear logs:",t)}}async exportLogs(){return(await this.getLogs()).map((t=>`${t.timestamp} [${t.level}] ${t.component}: ${t.message}${t.data?` | Data: ${t.data}`:""}`)).join("\n")}async error(t,e,o){return this.log("ERROR",t,e,o)}async critical(t,e,o){return this.log("CRITICAL",t,e,o)}async success(t,e,o){return this.log("SUCCESS",t,e,o)}async warning(t,e,o){return this.log("WARNING",t,e,o)}};t=o.hmd(t),console.log("HeadHunter Resume Auto-Boost Extension: Content script loaded"),window.resumeBoosterLoaded=!0,console.log("‚úÖ resumeBoosterLoaded flag set to true");let s=!1,i=!1,c=null,a=null,r=null;function l(){if(!s&&!i){i=!0,console.log("HeadHunter Resume Auto-Boost: Content script initializing...");try{chrome.runtime.onMessage.hasListener(f)&&chrome.runtime.onMessage.removeListener(f),chrome.runtime.onMessage.addListener(f),console.log("Message listener set up"),c&&c.disconnect(),c=new MutationObserver((t=>{let e=!1;for(const o of t){if("childList"===o.type){const t=[...Array.from(o.addedNodes),...Array.from(o.removedNodes)];for(const o of t)if(o.nodeType===Node.ELEMENT_NODE){const t=o;if("BUTTON"===t.tagName||t.querySelector("button")||t.classList.contains("resume-update")||t.classList.contains("boost")){e=!0;break}}}if("attributes"===o.type&&o.target.nodeType===Node.ELEMENT_NODE){const t=o.target;("BUTTON"===t.tagName||t.closest("button")||["disabled","aria-disabled","class"].includes(o.attributeName||""))&&(e=!0)}}e&&setTimeout(g,100)})),c.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["disabled","aria-disabled","class"]}),console.log("Mutation observer set up"),async function(){a&&clearTimeout(a);try{const t=60*((await chrome.storage.sync.get(["extension_settings"])).extension_settings||{refreshInterval:15}).refreshInterval*1e3;a=setTimeout((()=>{m()}),t),console.log(`Page refresh scheduled in ${t/1e3/60} minutes`)}catch(t){console.error("Failed to get refresh interval from settings, using default 15 minutes:",t),a=setTimeout((()=>{m()}),9e5)}}().catch((t=>{console.error("Failed to setup page refresh:",t),n.error("ContentScript","Failed to setup page refresh",{url:window.location.href,error:t instanceof Error?t.message:String(t)}).catch((()=>{}))})),setTimeout((()=>{g(),console.log("Initial button state check completed")}),1e3),setTimeout((()=>g()),3e3),setTimeout((()=>g()),5e3),s=!0,console.log("HeadHunter Resume Auto-Boost: Content script initialized"),n.success("ContentScript","Successfully initialized",{url:window.location.href,readyState:document.readyState}).catch((()=>{}))}catch(t){n.critical("ContentScript","Initialization failed",{url:window.location.href,error:t instanceof Error?t.message:String(t),stack:t instanceof Error?t.stack:void 0}).catch((()=>{})),console.error("Failed to initialize content script:",t)}finally{i=!1}}}function u(){console.log("üîç Searching for boost button...");const t=document.querySelector('button[data-qa="resume-update-button"]');if(t)return console.log("‚úÖ Found button via direct selector:",t),n.success("ContentScript","Button found via direct selector",{url:window.location.href,buttonText:t.textContent?.trim(),selector:'button[data-qa="resume-update-button"]'}).catch((()=>{})),t;const e=["–ü–æ–¥–Ω—è—Ç—å –≤ –ø–æ–∏—Å–∫–µ","–ü–æ–¥–Ω—è—Ç—å —Ä–µ–∑—é–º–µ","–ü–æ–¥–Ω—è—Ç—å","–û–±–Ω–æ–≤–∏—Ç—å —Ä–µ–∑—é–º–µ","–û–±–Ω–æ–≤–∏—Ç—å"];console.log("üéØ Step 1: Looking for exact text matches...");for(const t of e){const e=document.querySelectorAll('button, a, [role="button"]');for(let o=0;o<e.length;o++){const s=e[o],i=s.textContent?.trim()||"";if(console.log(`üîç Checking element: "${i}" vs "${t}"`),i===t)return console.log(`‚úÖ Found exact match for "${t}":`,s),n.success("ContentScript","Button found via text match",{url:window.location.href,buttonText:i,matchedText:t,method:"exact_text_match"}).catch((()=>{})),s}}console.log("üéØ Step 2: Looking for partial text matches...");for(const t of e){const e=document.querySelectorAll('button, a, [role="button"]');for(let o=0;o<e.length;o++){const s=e[o],i=s.textContent?.trim()||"";if(i.includes(t))return console.log(`‚úÖ Found partial match for "${t}":`,s),n.success("ContentScript","Button found via partial text match",{url:window.location.href,buttonText:i,matchedText:t,method:"partial_text_match"}).catch((()=>{})),s}}return console.log(`‚ùå No boost button found. Total clickable elements on page: ${document.querySelectorAll('button, a, [role="button"]').length}`),n.error("ContentScript","Button not found on page",{url:window.location.href,totalButtons:document.querySelectorAll("button").length,totalLinks:document.querySelectorAll("a").length,totalClickable:document.querySelectorAll('button, a, [role="button"]').length,pageTitle:document.title}).catch((()=>{})),null}function d(){const t=u();if(!t)return n.warning("ContentScript","Button activity check failed - button not found",{url:window.location.href}).catch((()=>{})),!1;if(t.hasAttribute("disabled")||"true"===t.getAttribute("aria-disabled"))return n.warning("ContentScript","Button is disabled",{url:window.location.href,buttonText:t.textContent?.trim(),disabled:t.hasAttribute("disabled"),ariaDisabled:t.getAttribute("aria-disabled")}).catch((()=>{})),!1;const e=t.classList,o=["disabled","inactive","loading","cooldown"];for(const s of o)if(e.contains(s))return n.warning("ContentScript","Button has inactive class",{url:window.location.href,buttonText:t.textContent?.trim(),inactiveClass:s,allClasses:t.className}).catch((()=>{})),!1;const s=t.textContent?.toLowerCase()||"",i=["–ø–æ–¥–æ–∂–¥–∏—Ç–µ","–æ–±–Ω–æ–≤–ª–µ–Ω–æ","–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ","–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ"];for(const e of i)if(s.includes(e))return n.warning("ContentScript","Button has inactive text",{url:window.location.href,buttonText:t.textContent?.trim(),inactiveText:e}).catch((()=>{})),!1;return n.success("ContentScript","Button is active and clickable",{url:window.location.href,buttonText:t.textContent?.trim(),className:t.className}).catch((()=>{})),!0}async function h(){try{const t=u();if(!t)return console.warn("‚ùå Boost button not found"),!1;if(!d())return console.warn("‚ùå Boost button is not active/clickable"),!1;console.log("üéØ Found boost button, attempting to click:",{text:t.textContent?.trim(),dataQa:t.getAttribute("data-qa"),className:t.className,tagName:t.tagName,disabled:t.disabled||t.hasAttribute("disabled"),ariaDisabled:t.getAttribute("aria-disabled"),offsetParent:!!t.offsetParent});const e=!document.hidden&&"visible"===document.visibilityState;console.log("üîç Tab activity status: "+(e?"ACTIVE":"BACKGROUND")),console.log("ü§ñ Starting human behavior simulation..."),n.warning("ContentScript","Human simulation started",{url:window.location.href,tabActive:e,simulationType:e?"full":"lightweight",buttonText:t.textContent?.trim()}).catch((()=>{}));const o=e?1e3*Math.random()+500:300*Math.random()+200;console.log(`üß† Human thinking delay: ${o}ms`),await new Promise((t=>setTimeout(t,o)));try{const o=e?"smooth":"auto";t.scrollIntoView({behavior:o,block:"center"});const n=e?500:100;await new Promise((t=>setTimeout(t,n))),console.log(`üìú Scrolled to button (${o})`)}catch(t){console.warn("Scroll failed:",t)}if(e){console.log("üñ±Ô∏è Full mouse simulation for active tab...");try{const e=t.getBoundingClientRect(),o=e.left+e.width/2,s=e.top+e.height/2,i=new MouseEvent("mousemove",{bubbles:!0,cancelable:!0,view:window,clientX:o,clientY:s});document.dispatchEvent(i);const c=new MouseEvent("mouseenter",{bubbles:!1,cancelable:!0,view:window,clientX:o,clientY:s});t.dispatchEvent(c);const a=new MouseEvent("mouseover",{bubbles:!0,cancelable:!0,view:window,clientX:o,clientY:s});t.dispatchEvent(a),await new Promise((t=>setTimeout(t,200+300*Math.random())));try{t.focus(),await new Promise((t=>setTimeout(t,100)))}catch(t){console.warn("Focus failed:",t)}n.success("ContentScript","Full mouse simulation completed",{url:window.location.href,mouseEvents:["mousemove","mouseenter","mouseover"],focusSuccess:!0,buttonCoords:{x:o,y:s}}).catch((()=>{}))}catch(t){n.error("ContentScript","Full mouse simulation failed",{url:window.location.href,error:t instanceof Error?t.message:String(t)}).catch((()=>{}))}}else{console.log("‚ö° Lightweight simulation for background tab...");try{const e=t.textContent?.trim()||"",o=Math.max(10*e.length,100);console.log(`üìñ Simulating reading "${e}" (${o}ms)`),await new Promise((t=>setTimeout(t,o)));let s=!1;try{const e=new FocusEvent("focus",{bubbles:!0,cancelable:!0,view:window});t.dispatchEvent(e),await new Promise((t=>setTimeout(t,50))),s=!0}catch(t){console.warn("Focus event failed:",t)}let i=!1;try{t.classList.add("hover","focus-visible"),await new Promise((t=>setTimeout(t,100))),t.classList.remove("hover","focus-visible"),i=!0}catch(t){}n.success("ContentScript","Lightweight simulation completed",{url:window.location.href,buttonText:e,readingTime:o,focusSuccess:s,hoverSuccess:i,textLength:e.length}).catch((()=>{}))}catch(t){n.error("ContentScript","Lightweight simulation failed",{url:window.location.href,error:t instanceof Error?t.message:String(t)}).catch((()=>{}))}}console.log("ü§ñ Human simulation complete, starting click sequence...");let s=!1;const i=[];try{const o=t.getBoundingClientRect(),n=o.left+o.width/2,c=o.top+o.height/2,a=[{type:"mousedown",delay:0},{type:"mouseup",delay:e?50+100*Math.random():30},{type:"click",delay:e?10:5}];for(const o of a){await new Promise((t=>setTimeout(t,o.delay)));const s=new MouseEvent(o.type,{bubbles:!0,cancelable:!0,view:window,button:0,buttons:"mousedown"===o.type?1:0,clientX:n+(Math.random()-.5)*(e?2:1),clientY:c+(Math.random()-.5)*(e?2:1),screenX:n+window.screenX,screenY:c+window.screenY});t.dispatchEvent(s)}console.log("‚úÖ Method 1: Realistic mouse sequence executed"),i.push("Realistic mouse: SUCCESS"),s=!0}catch(t){console.warn("‚ùå Method 1 failed:",t),i.push(`Realistic mouse: FAILED - ${t}`)}try{const o=e?100+200*Math.random():50+100*Math.random();await new Promise((t=>setTimeout(t,o))),t.click(),console.log("‚úÖ Method 2: Direct click executed"),i.push("Direct click: SUCCESS"),s=!0}catch(t){console.warn("‚ùå Method 2 failed:",t),i.push(`Direct click: FAILED - ${t}`)}try{const o=e?50:20;await new Promise((t=>setTimeout(t,o)));const n=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0});t.dispatchEvent(n);const c=e?50+100*Math.random():30;await new Promise((t=>setTimeout(t,c)));const a=new KeyboardEvent("keyup",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0});t.dispatchEvent(a),console.log("‚úÖ Method 3: Keyboard Enter executed"),i.push("Keyboard Enter: SUCCESS"),s=!0}catch(t){console.warn("‚ùå Method 3 failed:",t),i.push(`Keyboard Enter: FAILED - ${t}`)}try{const o=e?30:10;await new Promise((t=>setTimeout(t,o)));const n=new Event("click",{bubbles:!0,cancelable:!0});t.dispatchEvent(n),console.log("‚úÖ Method 4: Programmatic click executed"),i.push("Programmatic click: SUCCESS"),s=!0}catch(t){console.warn("‚ùå Method 4 failed:",t),i.push(`Programmatic click: FAILED - ${t}`)}if(console.log("üìä Click attempt summary:",i),s){console.log("üéâ Boost button click attempts completed"),n.success("ContentScript","Button click attempts completed",{url:window.location.href,buttonText:t.textContent?.trim(),methods:i,tabActive:e,simulationType:e?"full":"lightweight",totalMethods:i.length,successfulMethods:i.filter((t=>t.includes("SUCCESS"))).length,failedMethods:i.filter((t=>t.includes("FAILED"))).length}).catch((()=>{}));const o=e?5e3:3e3;console.log(`‚è±Ô∏è Waiting ${o}ms for page response...`);const s=500,c=Math.floor(o/s);let a=0,r=0,l=[];for(let t=0;t<c;t++){if(await new Promise((t=>setTimeout(t,s))),a++,u()&&!d()){r++,console.log("‚úÖ Button became inactive - click likely successful"),console.log("üîç Verifying button state stability..."),await new Promise((t=>setTimeout(t,1500)));if(u()&&!d())return n.success("ContentScript","Button state change confirmed - click successful",{url:window.location.href,checksPerformed:a,waitTime:o,simulationType:e?"full":"lightweight",detectionMethod:"button_state_change_verified",stableInactiveTime:1500}).catch((()=>{})),await new Promise((t=>setTimeout(t,500))),!0;n.warning("ContentScript","Button returned to active state - possible rollback",{url:window.location.href,checksPerformed:a,simulationType:e?"full":"lightweight",detectionMethod:"button_reactivation_detected",rollbackTime:1500}).catch((()=>{})),console.log("‚ö†Ô∏è Button became active again, continuing to monitor...")}const t=["–æ–±–Ω–æ–≤–ª–µ–Ω–æ","–ø–æ–¥–Ω—è—Ç–æ","—É—Å–ø–µ—à–Ω–æ","updated","boosted","success"],i=document.body.textContent?.toLowerCase()||"";for(const s of t)if(i.includes(s)&&!l.includes(s)){l.push(s),console.log(`‚úÖ Found success indicator "${s}" on page`),console.log("üîç Waiting additional time to verify success is not rolled back..."),await new Promise((t=>setTimeout(t,2e3)));const t=u(),i=(document.body.textContent?.toLowerCase()||"").includes(s),c=!!t&&!d();if(i||c)return n.success("ContentScript","Success confirmed after verification delay",{url:window.location.href,indicator:s,indicatorStillPresent:i,buttonStillInactive:c,checksPerformed:a,waitTime:o,simulationType:e?"full":"lightweight",detectionMethod:"success_indicator_verified"}).catch((()=>{})),!0;n.warning("ContentScript","Success indicator disappeared - possible rollback detected",{url:window.location.href,indicator:s,indicatorStillPresent:i,buttonStillInactive:c,checksPerformed:a,simulationType:e?"full":"lightweight",detectionMethod:"rollback_detected"}).catch((()=>{})),console.log("‚ö†Ô∏è Success indicator disappeared, continuing to wait...")}}n.warning("ContentScript","Intelligent waiting completed",{url:window.location.href,checksPerformed:a,maxChecks:c,waitTime:o,buttonStateChanges:r,successIndicatorsFound:l,simulationType:e?"full":"lightweight"}).catch((()=>{})),console.log("üîç Performing final comprehensive check...");const h=!!u()&&d(),m=document.body.textContent?.toLowerCase()||"",g=["—Ä–µ–∑—é–º–µ –æ–±–Ω–æ–≤–ª–µ–Ω–æ","—Ä–µ–∑—é–º–µ –ø–æ–¥–Ω—è—Ç–æ","–ø–æ–¥–Ω—è—Ç–æ –≤ –ø–æ–∏—Å–∫–µ","–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—à–ª–æ —É—Å–ø–µ—à–Ω–æ","resume updated","resume boosted"],f=[];for(const t of g)m.includes(t)&&f.push(t);const w=window.location.href!==window.location.href.split("?")[0],b=window.location.href.includes("success")||window.location.href.includes("updated")||window.location.href.includes("boosted"),p=(f.length>0?2:0)+(l.length>0?2:0)+(h?0:1)+(r>0?1:0)+(b?1:0);return p>=2?(n.success("ContentScript","Final analysis indicates likely success",{url:window.location.href,successScore:p,foundAdditionalIndicators:f,successIndicatorsFound:l,finalButtonActive:h,buttonStateChanges:r,hasSuccessParams:b,urlChanged:w,simulationType:e?"full":"lightweight",detectionMethod:"comprehensive_analysis"}).catch((()=>{})),!0):(n.error("ContentScript","Final analysis indicates likely failure",{url:window.location.href,successScore:p,foundAdditionalIndicators:f,successIndicatorsFound:l,finalButtonActive:h,buttonStateChanges:r,hasSuccessParams:b,urlChanged:w,simulationType:e?"full":"lightweight",detectionMethod:"comprehensive_analysis",reason:"insufficient_success_indicators"}).catch((()=>{})),!1)}return console.error("‚ùå All click methods failed"),!1}catch(t){return console.error("‚ùå Failed to click boost button:",t),n.critical("ContentScript","Failed to click boost button",{error:t instanceof Error?t.message:String(t),url:window.location.href,buttonFound:!!u()}).catch((()=>{})),!1}}function m(){try{console.log("Refreshing page to maintain session..."),window.location.reload()}catch(t){console.error("Failed to refresh page:",t)}}function g(){const t=u(),e=d();r!==e&&(r=e,function(t){try{return chrome.runtime.sendMessage(t),!0}catch(e){return console.error("Failed to send message to background:",e),"BUTTON_STATE"===t.type&&console.warn("Button state update failed - extension may not be responding"),!1}}({type:"BUTTON_STATE",success:!0,data:{buttonFound:!!t,isActive:e,buttonText:t?.textContent||null}})||console.warn("Failed to notify background script of button state change"))}function f(t,e,o){switch(console.log("Content script received message:",t),t.type){case"BOOST_RESUME":return async function(t){try{n.warning("ContentScript","Boost request received - starting click attempt",{url:window.location.href,timestamp:(new Date).toISOString()}).catch((()=>{}));const e=await h();e?n.success("ContentScript","Button click completed successfully",{url:window.location.href,timestamp:(new Date).toISOString(),buttonFound:!!u(),buttonActive:d()}).catch((()=>{})):n.error("ContentScript","Button click failed",{url:window.location.href,timestamp:(new Date).toISOString(),buttonFound:!!u(),buttonActive:d(),reason:"clickBoostButton returned false"}).catch((()=>{})),t({type:"BUTTON_CLICKED",success:e,data:{timestamp:Date.now(),buttonFound:!!u(),wasActive:d()}})}catch(e){console.error("Error handling boost request:",e),n.critical("ContentScript","Exception during boost request",{url:window.location.href,timestamp:(new Date).toISOString(),error:e instanceof Error?e.message:String(e),stack:e instanceof Error?e.stack:void 0}).catch((()=>{})),t({type:"ERROR",success:!1,data:{error:e instanceof Error?e.message:"Unknown error",timestamp:Date.now()}})}}(o),!0;case"CHECK_BUTTON_STATE":return function(t){const e=u();t({type:"BUTTON_STATE",success:!0,data:{buttonFound:!!e,isActive:d(),buttonText:e?.textContent||null,timestamp:Date.now()}})}(o),!1;case"REFRESH_PAGE":return m(),o({type:"PAGE_REFRESHED",success:!0}),!1;case"GET_STATE":return function(t){const e=u();t({type:"BUTTON_STATE",success:!0,data:{isInitialized:s,buttonFound:!!e,isActive:d(),buttonText:e?.textContent||null,url:window.location.href,title:document.title,timestamp:Date.now()}})}(o),!1;case"SETTINGS_UPDATE":return i=t.data,console.log("üîÑ Content script received settings update:",i),console.log("üîÑ Settings type:",typeof i),console.log("üîÑ Settings keys:",Object.keys(i||{})),i&&i.refreshInterval?(console.log(`üîÑ Updating page refresh interval to ${i.refreshInterval} minutes`),function(t){console.log(`üîÑ Setting up page refresh with interval: ${t} minutes`),a&&(console.log("üîÑ Clearing existing refresh timer"),clearTimeout(a));try{const e=60*t*1e3;console.log(`üîÑ Calculated refresh interval: ${e}ms`),a=setTimeout((()=>{console.log("üîÑ Page refresh timer expired, refreshing page..."),m()}),e),console.log(`‚úÖ Page refresh scheduled in ${t} minutes (${e}ms)`)}catch(t){console.error("‚ùå Failed to setup page refresh with interval:",t),a=setTimeout((()=>{m()}),9e5),console.log("üîÑ Fallback: Page refresh scheduled in 15 minutes")}}(i.refreshInterval)):console.warn("üîÑ No refreshInterval found in settings:",i),o({type:"BUTTON_STATE",success:!0}),!1;case"TEST_MESSAGE":return console.log("üß™ Content script –ø–æ–ª—É—á–∏–ª TEST_MESSAGE"),o({type:"TEST_RESPONSE",success:!0,data:{loaded:!0,timestamp:Date.now(),url:window.location.href}}),!1;default:return console.warn("Unknown message type:",t.type),o({type:"ERROR",success:!1,data:"Unknown message type"}),!1}var i}l(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{setTimeout(l,100)})):"interactive"===document.readyState&&setTimeout(l,100),window.addEventListener("load",(()=>{setTimeout(l,500)})),window.addEventListener("beforeunload",(function(){c&&(c.disconnect(),c=null),a&&(clearTimeout(a),a=null),chrome.runtime.onMessage.hasListener(f)&&chrome.runtime.onMessage.removeListener(f),s=!1,console.log("Content script cleaned up")})),t.exports&&(t.exports={findBoostButton:u,isButtonActive:d,clickBoostButton:h,refreshPage:m,checkButtonState:g})}},e={};function o(n){var s=e[n];if(void 0!==s)return s.exports;var i=e[n]={id:n,loaded:!1,exports:{}};return t[n](i,i.exports,o),i.loaded=!0,i.exports}o.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),o(931)})();