(()=>{"use strict";var t={931:(t,e,o)=>{const n=new class{constructor(){this.logs=[],this.maxLogs=500,this.storageKey="extension_error_logs"}async log(t,e,o,n){const s={timestamp:(new Date).toISOString(),level:t,component:e,message:o,data:n?JSON.stringify(n).substring(0,2e3):void 0};this.logs.push(s),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs));try{await chrome.storage.local.set({[this.storageKey]:this.logs})}catch(t){console.error("Failed to save logs to storage:",t)}const c=`[${t}] ${e}: ${o}`;switch(t){case"ERROR":case"CRITICAL":console.error(c,n);break;case"WARNING":console.warn(c,n);break;case"SUCCESS":console.log(c,n)}}async getLogs(){try{return(await chrome.storage.local.get([this.storageKey]))[this.storageKey]||[]}catch(t){return console.error("Failed to get logs from storage:",t),[]}}async clearLogs(){try{this.logs=[],await chrome.storage.local.remove([this.storageKey])}catch(t){console.error("Failed to clear logs:",t)}}async exportLogs(){return(await this.getLogs()).map((t=>`${t.timestamp} [${t.level}] ${t.component}: ${t.message}${t.data?` | Data: ${t.data}`:""}`)).join("\n")}async error(t,e,o){return this.log("ERROR",t,e,o)}async critical(t,e,o){return this.log("CRITICAL",t,e,o)}async success(t,e,o){return this.log("SUCCESS",t,e,o)}async warning(t,e,o){return this.log("WARNING",t,e,o)}};t=o.hmd(t),window.resumeBoosterLoaded=!0;let s=!1,c=!1,r=null,a=null,i=null;function l(){if(!s&&!c){c=!0;try{chrome.runtime.onMessage.hasListener(w)&&chrome.runtime.onMessage.removeListener(w),chrome.runtime.onMessage.addListener(w),r&&r.disconnect(),r=new MutationObserver((t=>{let e=!1;for(const o of t){if("childList"===o.type){const t=[...Array.from(o.addedNodes),...Array.from(o.removedNodes)];for(const o of t)if(o.nodeType===Node.ELEMENT_NODE){const t=o;if("BUTTON"===t.tagName||t.querySelector("button")||t.classList.contains("resume-update")||t.classList.contains("boost")){e=!0;break}}}if("attributes"===o.type&&o.target.nodeType===Node.ELEMENT_NODE){const t=o.target;("BUTTON"===t.tagName||t.closest("button")||["disabled","aria-disabled","class"].includes(o.attributeName||""))&&(e=!0)}}e&&setTimeout(b,100)})),r.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["disabled","aria-disabled","class"]}),async function(){a&&clearTimeout(a);try{const t=60*((await chrome.storage.sync.get(["extension_settings"])).extension_settings||{refreshInterval:15}).refreshInterval*1e3;a=setTimeout((()=>{m()}),t)}catch(t){console.error("Failed to get refresh interval from settings, using default 15 minutes:",t),a=setTimeout((()=>{m()}),9e5)}}().catch((t=>{console.error("Failed to setup page refresh:",t),n.error("ContentScript","Failed to setup page refresh",{url:window.location.href,error:t instanceof Error?t.message:String(t)}).catch((()=>{}))})),setTimeout((()=>{b()}),1e3),setTimeout((()=>b()),3e3),setTimeout((()=>b()),5e3),s=!0,n.success("ContentScript","Successfully initialized",{url:window.location.href,readyState:document.readyState}).catch((()=>{}))}catch(t){n.critical("ContentScript","Initialization failed",{url:window.location.href,error:t instanceof Error?t.message:String(t),stack:t instanceof Error?t.stack:void 0}).catch((()=>{})),console.error("Failed to initialize content script:",t)}finally{c=!1}}}function u(){const t=document.querySelector('button[data-qa="resume-update-button"]');if(t)return n.success("ContentScript","Button found via direct selector",{url:window.location.href,buttonText:t.textContent?.trim(),selector:'button[data-qa="resume-update-button"]'}).catch((()=>{})),t;const e=["Поднять в поиске","Поднять резюме","Поднять","Обновить резюме","Обновить"];for(const t of e){const e=document.querySelectorAll('button, a, [role="button"]');for(let o=0;o<e.length;o++){const s=e[o],c=s.textContent?.trim()||"";if(c===t)return n.success("ContentScript","Button found via text match",{url:window.location.href,buttonText:c,matchedText:t,method:"exact_text_match"}).catch((()=>{})),s}}for(const t of e){const e=document.querySelectorAll('button, a, [role="button"]');for(let o=0;o<e.length;o++){const s=e[o],c=s.textContent?.trim()||"";if(c.includes(t))return n.success("ContentScript","Button found via partial text match",{url:window.location.href,buttonText:c,matchedText:t,method:"partial_text_match"}).catch((()=>{})),s}}return n.error("ContentScript","Button not found on page",{url:window.location.href,totalButtons:document.querySelectorAll("button").length,totalLinks:document.querySelectorAll("a").length,totalClickable:document.querySelectorAll('button, a, [role="button"]').length,pageTitle:document.title}).catch((()=>{})),null}function d(){const t=u();if(!t)return n.warning("ContentScript","Button activity check failed - button not found",{url:window.location.href}).catch((()=>{})),!1;if(t.hasAttribute("disabled")||"true"===t.getAttribute("aria-disabled"))return n.warning("ContentScript","Button is disabled",{url:window.location.href,buttonText:t.textContent?.trim(),disabled:t.hasAttribute("disabled"),ariaDisabled:t.getAttribute("aria-disabled")}).catch((()=>{})),!1;const e=t.classList,o=["disabled","inactive","loading","cooldown"];for(const s of o)if(e.contains(s))return n.warning("ContentScript","Button has inactive class",{url:window.location.href,buttonText:t.textContent?.trim(),inactiveClass:s,allClasses:t.className}).catch((()=>{})),!1;const s=t.textContent?.toLowerCase()||"",c=["подождите","обновлено","недоступно","заблокировано"];for(const e of c)if(s.includes(e))return n.warning("ContentScript","Button has inactive text",{url:window.location.href,buttonText:t.textContent?.trim(),inactiveText:e}).catch((()=>{})),!1;return n.success("ContentScript","Button is active and clickable",{url:window.location.href,buttonText:t.textContent?.trim(),className:t.className}).catch((()=>{})),!0}async function h(){try{const t=u();if(!t)return console.warn("❌ Boost button not found"),!1;if(!d())return console.warn("❌ Boost button is not active/clickable"),!1;n.warning("ContentScript","Boost request received - starting click attempt",{url:window.location.href,timestamp:(new Date).toISOString()}).catch((()=>{}));const e=t.textContent?.trim(),o=t.className,s=t.hasAttribute("disabled");try{t.scrollIntoView({behavior:"smooth",block:"center"}),await new Promise((t=>setTimeout(t,300)))}catch(t){console.warn("Scroll failed:",t)}try{t.focus(),await new Promise((t=>setTimeout(t,100)))}catch(t){console.warn("Focus failed:",t)}let c=!1;const r=[];try{t.click(),r.push("Direct Click: EXECUTED"),c=!0,n.success("ContentScript","Direct click executed",{url:window.location.href,buttonText:e}).catch((()=>{}))}catch(t){r.push(`Direct Click: FAILED - ${t}`)}if(!c)try{const o=t.getBoundingClientRect(),s=o.left+o.width/2,a=o.top+o.height/2;t.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,view:window,clientX:s,clientY:a,button:0,buttons:1})),await new Promise((t=>setTimeout(t,50))),t.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window,clientX:s,clientY:a,button:0,buttons:1})),await new Promise((t=>setTimeout(t,50))),t.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0,cancelable:!0,view:window,clientX:s,clientY:a,button:0,buttons:0})),r.push("Event Click: EXECUTED"),c=!0,n.success("ContentScript","Event click executed",{url:window.location.href,buttonText:e,coordinates:{x:s,y:a}}).catch((()=>{}))}catch(t){r.push(`Event Click: FAILED - ${t}`)}if(!c)try{const o=t.closest("form");if(o){const t=new Event("submit",{bubbles:!0,cancelable:!0});o.dispatchEvent(t),r.push("Form Submit: EXECUTED")}else t.dispatchEvent(new KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,key:"Enter",code:"Enter",keyCode:13})),t.dispatchEvent(new KeyboardEvent("keypress",{bubbles:!0,cancelable:!0,key:"Enter",code:"Enter",keyCode:13})),r.push("Keyboard Enter: EXECUTED");c=!0,n.success("ContentScript","Alternative click method executed",{url:window.location.href,buttonText:e,method:o?"form_submit":"keyboard_enter"}).catch((()=>{}))}catch(t){r.push(`Alternative Click: FAILED - ${t}`)}await new Promise((t=>setTimeout(t,2e3)));let a=!1;const i=[],l=u();if(l){const t=l.textContent?.trim(),n=l.className,c=l.hasAttribute("disabled");t!==e&&(i.push("button_text_changed"),a=!0),n!==o&&(i.push("button_classes_changed"),a=!0),c!==s&&(i.push("button_disabled_state_changed"),a=!0),(n.includes("disabled")||n.includes("success")||n.includes("completed"))&&(i.push("success_class_detected"),a=!0)}else i.push("button_disappeared"),a=!0;const h=window.location.href;(h.includes("success")||h.includes("updated"))&&(i.push("success_url_detected"),a=!0);const m=document.body.textContent?.toLowerCase()||"",b=["успешно обновлено","резюме поднято","поднято в поиске","обновлено","успешно","поднято"];for(const t of b)if(m.includes(t)){i.push(`keyword_found_${t.replace(/\s+/g,"_")}`),a=!0;break}return a?(n.success("ContentScript","Click appears successful",{url:window.location.href,clickMethods:r,successIndicators:i,buttonStateChange:{textChanged:l?.textContent?.trim()!==e,classesChanged:l?.className!==o,disabledChanged:l?.hasAttribute("disabled")!==s}}).catch((()=>{})),!0):(n.warning("ContentScript","Click may have failed - no success indicators detected",{url:window.location.href,clickMethods:r,successIndicators:i,buttonFound:!!l,buttonText:l?.textContent?.trim()}).catch((()=>{})),!1)}catch(t){return console.error("❌ Failed to click boost button:",t),n.critical("ContentScript","Failed to click boost button",{error:t instanceof Error?t.message:String(t),url:window.location.href,buttonFound:!!u()}).catch((()=>{})),!1}}function m(){try{console.log("Refreshing page to maintain session..."),window.location.reload()}catch(t){console.error("Failed to refresh page:",t)}}function b(){const t=u(),e=d();i!==e&&(i=e,function(t){try{return chrome.runtime.sendMessage(t),!0}catch(e){return console.error("Failed to send message to background:",e),"BUTTON_STATE"===t.type&&console.warn("Button state update failed - extension may not be responding"),!1}}({type:"BUTTON_STATE",success:!0,data:{buttonFound:!!t,isActive:e,buttonText:t?.textContent||null}})||console.warn("Failed to notify background script of button state change"))}function w(t,e,o){switch(t.type){case"BOOST_RESUME":return async function(t){try{n.warning("ContentScript","Boost request received - starting click attempt",{url:window.location.href,timestamp:(new Date).toISOString()}).catch((()=>{}));const e=await h();e?n.success("ContentScript","Button click completed successfully",{url:window.location.href,timestamp:(new Date).toISOString(),buttonFound:!!u(),buttonActive:d()}).catch((()=>{})):n.error("ContentScript","Button click failed",{url:window.location.href,timestamp:(new Date).toISOString(),buttonFound:!!u(),buttonActive:d(),reason:"clickBoostButton returned false"}).catch((()=>{})),t({type:"BUTTON_CLICKED",success:e,data:{timestamp:Date.now(),buttonFound:!!u(),wasActive:d()}})}catch(e){console.error("Error handling boost request:",e),n.critical("ContentScript","Exception during boost request",{url:window.location.href,timestamp:(new Date).toISOString(),error:e instanceof Error?e.message:String(e),stack:e instanceof Error?e.stack:void 0}).catch((()=>{})),t({type:"ERROR",success:!1,data:{error:e instanceof Error?e.message:"Unknown error",timestamp:Date.now()}})}}(o),!0;case"CHECK_BUTTON_STATE":return function(t){const e=u();t({type:"BUTTON_STATE",success:!0,data:{buttonFound:!!e,isActive:d(),buttonText:e?.textContent||null,timestamp:Date.now()}})}(o),!1;case"REFRESH_PAGE":return m(),o({type:"PAGE_REFRESHED",success:!0}),!1;case"GET_STATE":return function(t){const e=u();t({type:"BUTTON_STATE",success:!0,data:{isInitialized:s,buttonFound:!!e,isActive:d(),buttonText:e?.textContent||null,url:window.location.href,title:document.title,timestamp:Date.now()}})}(o),!1;case"SETTINGS_UPDATE":return(c=t.data)&&c.refreshInterval&&function(t){a&&clearTimeout(a);try{a=setTimeout((()=>{m()}),60*t*1e3)}catch(t){console.error("❌ Failed to setup page refresh with interval:",t),a=setTimeout((()=>{m()}),9e5)}}(c.refreshInterval),o({type:"BUTTON_STATE",success:!0}),!1;case"TEST_MESSAGE":return o({type:"TEST_RESPONSE",success:!0,data:{loaded:!0,timestamp:Date.now(),url:window.location.href}}),!1;default:return console.warn("Unknown message type:",t.type),o({type:"ERROR",success:!1,data:"Unknown message type"}),!1}var c}l(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{setTimeout(l,100)})):"interactive"===document.readyState&&setTimeout(l,100),window.addEventListener("load",(()=>{setTimeout(l,500)})),window.addEventListener("beforeunload",(function(){r&&(r.disconnect(),r=null),a&&(clearTimeout(a),a=null),chrome.runtime.onMessage.hasListener(w)&&chrome.runtime.onMessage.removeListener(w),s=!1})),t.exports&&(t.exports={findBoostButton:u,isButtonActive:d,clickBoostButton:h,refreshPage:m,checkButtonState:b})}},e={};function o(n){var s=e[n];if(void 0!==s)return s.exports;var c=e[n]={id:n,loaded:!1,exports:{}};return t[n](c,c.exports,o),c.loaded=!0,c.exports}o.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),o(931)})();